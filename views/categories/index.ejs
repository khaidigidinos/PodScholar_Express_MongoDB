<!DOCTYPE html>
<html lang="en">
    <head>
        <% include meta.ejs%>
        <title>Categories - PodScholar</title>
        <% include commonHead%>
        <% include starstyle%>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
            <% include navbar%>
        </nav>
        <header class="masthead" style="background-image: url('/images/about-bg.jpeg')">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="page-heading">
                            <h1>Categories</h1>
                            <span class="subheading">All possible categories will be shown here.</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <main class="mb-4">
            <div class="w-100 m-0">
                <div class="row gx-4 gx-lg-5 justify-content-center w-100 mr-0">
                    <div class="col-9">
                        <br>
                        <br>
                        <div class="row w-100 mt-3" id="feed">
                            
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <% include commonBody%>
        <script>
            function getRecents() {
                $.LoadingOverlay('show')

                $.ajax({
                    type: "GET",
                    url: "/api/categories",
                    success: (result) => {
                        for(let i = 0; i < result.length; i++) {
                            let curr = result[i]
                            $('#feed').append(`
                                <p>
                                    <span>Discipline: <a href="/categories/scientific-discipline?name=${curr.name}">${curr.name}</a></span>
                                    <br />
                                    <span>Count: ${curr.count}</span>
                                </p>
                            `)
                        }
                        $.LoadingOverlay('hide')
                    }, 
                    error: () => {
                        $.LoadingOverlay('hide')
                    }
                })
            }

            getRecents()
        </script>
    </body>
</html>